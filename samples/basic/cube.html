<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
	<head>
		<title>CubicVR.js: Basic Textured Cube</title>
		<script src="../../CubicVR.js" type="text/javascript"></script>
		<script type='text/javascript'>	
			var boxMesh;

			function webGLStart() 
			{
        var canvas = document.getElementById("cubicvr-canvas");
        
        gl = CubicVR.GLCore.init(document.getElementById("cubicvr-canvas"), "../../CubicVR_Core.vs", "../../CubicVR_Core.fs");
                
        if (!gl) { alert("Sorry, no WebGL support."); return; };

				boxMesh = new CubicVR.Mesh();

				// Make a material named test
				var boxMaterial = new CubicVR.Material({
				  textures: {
				    color: new CubicVR.Texture("../images/6583-diffuse.jpg")
				  }
				});

				// Build a box, set face material to boxMaterial
				CubicVR.genBoxObject(boxMesh,1.0,boxMaterial);

				// calculate face materials (used for UV mapping and lighting)
				boxMesh.calcNormals();

        // Create a UV Mapper and apply it to boxMaterial
        new CubicVR.UVMapper({
          projectionMode: CubicVR.enums.uv.projection.CUBIC,
          scale: [1,1,1]         
        }).apply(boxMesh,boxMaterial);

        // triangulate and buffer object to GPU, remove unused data
				boxMesh.triangulateQuads().compile().clean();
				
		    gl.clearColor(0.0, 0.0, 0.0, 1.0);

		    gl.clearDepth(1.0);

		    gl.enable(gl.DEPTH_TEST);
		    gl.depthFunc(gl.LEQUAL);

		    setInterval(drawScene, 25);
		  }
		  
		
		  function drawScene() 
			{
		    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
				
				modelViewMat = CubicVR.mat4.lookat(1,1,1, 0, 0, 0, 0, 1, 0);
				projectionMat = CubicVR.mat4.perspective(80, 1.0, 0.1, 100.0); 
   
				CubicVR.renderObject(boxMesh,modelViewMat,projectionMat,CubicVR.IdentityMatrix);
		  }			
		</script>
	</head>
	<body onLoad="webGLStart();">	  
		<div style='font-family:Arial;font-size:11px'>Basic Cube</div>
		<div><canvas id="cubicvr-canvas" style="border: none;" width="640" height="640"></canvas></div>
	</body>
</html>
