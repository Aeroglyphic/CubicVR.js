<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
	<head>
		<title>Workers Test</title>
    <style type="text/css">
    </style>
    <script src="../../CubicVR.js" type="text/javascript"></script>
		<script id="core-shader-vs" srcUrl="../../CubicVR_Core.vs" type="x-shader/x-vertex"></script>
		<script id="core-shader-fs" srcUrl="../../CubicVR_Core.fs" type="x-shader/x-fragment"></script>
    <script type='text/javascript'>	
      var worker;

      function on_key_down(e) {
        if (e.keyCode === 77) {
          worker.send({test:'Test'});
        }
        else if (e.keyCode === 69) {
          worker.send('test');
        } //if
      } //on_key_down

      window.addEventListener('DOMContentLoaded', function() {
        worker = new CubicVR.Worker({
          type: 'test',
          message: function(message) {
            document.getElementById('messages').innerHTML += '<br />' + message;
          },
          error: function(error) {
            document.getElementById('errors').innerHTML += '<br />' + error.message;
          }
        });
        worker.start();

        window.addEventListener("keydown", on_key_down, false);
      }, false);
    </script>
  </head>
  <body>
    Press M to send a message, or E to cause an error. The worker will respond accordingly after 1 second.
    <div id="messages" style="float:left;width:50%;"><h1>Messages</h1></div>
    <div id="errors" style="float:right;width:50%;"><h1>Errors</h1></div>
    </div>
  </body>
</html>


