<html>
  <head>
    <script type="text/javascript" src="../CubicVR.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function (e) {
        var core = CubicVR.init();
        var canvas = core.getCanvas();
        var scene = new core.Scene(canvas.width, canvas.height, 60);

        var mesh = core.primitives.box({
          size: 0.5,
          material: new core.Material({
            color: [1, 8, 0],
          }),
          uvmapper: {
            projectionMode: core.enums.uv.projection.CUBIC
          }
        }).prepare();

        var so = new core.SceneObject();
        var so1 = new core.SceneObject(mesh);
        var so2 = new core.SceneObject(mesh);
        var so3 = new core.SceneObject();
        var so4 = new core.SceneObject();
        
        so1.position = [12, 0, 0];
        so3.position = [-6, 0, 0];

        scene.bindSceneObject(so);
        so.bindChild(so4);
        so4.bindChild(so3);
        so3.bindChild(so2);
        so2.bindChild(so1);

        scene.prepareTransforms();

        console.log(so2.getAABB());

        scene.camera.target = [0, 0, 0];
        scene.camera.position = [0, 5, 5];

        var frames = 0;
        core.MainLoop( function ( timer, gl ) {
          scene.render();
          if (frames === 1) {
            console.log(so2.getAABB());
          }
          ++frames;
        });
      }, false);
    </script>
  </head>
  <body>
  </body>
</html>
